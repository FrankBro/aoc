i:0:$0
f:{(i;X):x
 $["noop"~4#y;(i+1;X)
   "addx"~4#y;(i+2;X+`I$*1_" "\y)
   x]}
l:(1;1) f\i
fi:{i:&x=*'l;$[0=x;0;0=#i;fi[x-1];*l[i;1]]}
c:(20+40*)'!6
v:fi'c
+/c*v

p:{i:fi[x+1];d:40!x;$[|/i=(d-1;d;d+1);"#";"."]}'!40*6
6 40#p
